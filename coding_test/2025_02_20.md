# ğŸš€ BFSë¥¼ í™œìš©í•œ ë²½ ë¶€ìˆ˜ê³  ì´ë™í•˜ê¸° ë¬¸ì œ í’€ì´

## ğŸ“Œ 1. ë¬¸ì œ ê°œìš”

ì£¼ì–´ì§„ `N x M` í¬ê¸°ì˜ ë§µì—ì„œ `(0,0)`ì—ì„œ ì¶œë°œí•˜ì—¬ `(N-1, M-1)`ê¹Œì§€ ì´ë™í•˜ëŠ” **ìµœë‹¨ ê±°ë¦¬**ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œì´ë‹¤.  
ë‹¨, **í•œ ê°œì˜ ë²½ì„ ë¶€ìˆ  ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ì£¼ì–´ì§„ë‹¤**ëŠ” ì ì´ íŠ¹ì§•ì´ë‹¤.

---

## ğŸ” 2. ì ‘ê·¼ ë°©ì‹

ì´ ë¬¸ì œëŠ” **BFS(Breadth-First Search)** ë¥¼ ì‚¬ìš©í•˜ì—¬ **ìµœë‹¨ ê±°ë¦¬ íƒìƒ‰**ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.  
ì—¬ê¸°ì— **ë²½ì„ í•œ ë²ˆë§Œ ë¶€ìˆ  ìˆ˜ ìˆëŠ” ìƒíƒœ(ê°€ëŠ¥/ë¶ˆê°€ëŠ¥)ë¥¼ í•¨ê»˜ ê´€ë¦¬**í•´ì•¼ í•˜ë¯€ë¡œ,  
**3ì°¨ì› `visited` ë¦¬ìŠ¤íŠ¸**ë¥¼ í™œìš©í•˜ì—¬ ìƒíƒœë¥¼ ì¶”ì í•œë‹¤.

- `visited[0][x][y]` â†’ ë²½ì„ ë¶€ìˆ˜ì§€ ì•Šê³  ë°©ë¬¸í•œ ê²½ìš°
- `visited[1][x][y]` â†’ ë²½ì„ í•œ ë²ˆ ë¶€ìˆœ ìƒíƒœì—ì„œ ë°©ë¬¸í•œ ê²½ìš°

ì´ë ‡ê²Œ í•˜ë©´ **ë²½ì„ ë¶€ìˆœ í›„ ë°©ë¬¸í•œ ìƒíƒœì™€ ë¶€ìˆ˜ì§€ ì•Šì€ ìƒíƒœë¥¼ êµ¬ë¶„í•˜ì—¬ BFS íƒìƒ‰ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤**.

---

## ğŸ’» 3. ì½”ë“œ êµ¬í˜„

```python
from collections import deque
import sys

# ì…ë ¥ ë°›ê¸°
N, M = map(int, sys.stdin.readline().split())
matrix = [list(map(int, sys.stdin.readline().strip())) for _ in range(N)]

# ì´ˆê¸°ê°’ ì„¤ì •
answer = int(1e9)

# BFS íƒìƒ‰
def bfs(start_x, start_y):
    global answer

    # ë°©ë¬¸ ì—¬ë¶€ ì €ì¥ (ë²½ì„ ë¶€ìˆœ ê²½ìš°ì™€ ë¶€ìˆ˜ì§€ ì•Šì€ ê²½ìš°ë¥¼ êµ¬ë¶„)
    visited = [[[False] * M for _ in range(N)] for _ in range(2)]

    # ë°©í–¥ ë²¡í„° (ìƒ, í•˜, ì¢Œ, ìš°)
    dx = (-1, 1, 0, 0)
    dy = (0, 0, -1, 1)

    # BFS ì‹œì‘
    queue = deque()
    queue.append((start_x, start_y, True, 1))  # (x, y, ë²½ ë¶€ìˆ˜ê¸° ê°€ëŠ¥ ì—¬ë¶€, ì´ë™ ê±°ë¦¬)
    visited[0][start_x][start_y] = True  # ë²½ì„ ë¶€ìˆ˜ì§€ ì•Šì€ ìƒíƒœë¡œ (0,0) ë°©ë¬¸ ì²˜ë¦¬

    while queue:
        x, y, bomb, dist = queue.popleft()

        # ëª©ì ì§€ì— ë„ë‹¬í•˜ë©´ ìµœì†Œ ê±°ë¦¬ ê°±ì‹ 
        if x == N - 1 and y == M - 1:
            answer = min(dist, answer)
            continue

        # ë„¤ ë°©í–¥ íƒìƒ‰
        for i in range(4):
            nx, ny = x + dx[i], y + dy[i]

            # ë²½ì„ ë¶€ìˆ˜ê³  ì´ë™í•˜ëŠ” ê²½ìš°
            if bomb and 0 <= nx < N and 0 <= ny < M and not visited[1][nx][ny] and matrix[nx][ny] == 1:
                visited[1][nx][ny] = True
                queue.append((nx, ny, False, dist + 1))

            # ë²½ì´ ì—†ëŠ” ê³³ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê²½ìš° (ë²½ ë¶€ìˆ˜ê¸° ê°€ëŠ¥)
            elif bomb and 0 <= nx < N and 0 <= ny < M and not visited[0][nx][ny] and matrix[nx][ny] == 0:
                visited[0][nx][ny] = True
                queue.append((nx, ny, bomb, dist + 1))

            # ë²½ì„ ì´ë¯¸ ë¶€ìˆœ ìƒíƒœì—ì„œ ì´ë™í•˜ëŠ” ê²½ìš°
            elif not bomb and 0 <= nx < N and 0 <= ny < M and not visited[1][nx][ny] and matrix[nx][ny] == 0:
                visited[1][nx][ny] = True
                queue.append((nx, ny, bomb, dist + 1))

# BFS ì‹¤í–‰
bfs(0, 0)

# ê²°ê³¼ ì¶œë ¥
print(-1 if answer == int(1e9) else answer)
```
